(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"0/6H":function(t,n,e){"use strict";e.d(n,"a",(function(){return r}));var i=e("A36C"),o=e("iWo5"),s=e("qULd");const r=(t,n)=>{let e,r;const a=(t,i,o)=>{if("undefined"==typeof document)return;const s=document.elementFromPoint(t,i);s&&n(s)?s!==e&&(l(),c(s,o)):l()},c=(t,n)=>{e=t,r||(r=e);const o=e;Object(i.f)(()=>o.classList.add("ion-activated")),n()},l=(t=!1)=>{if(!e)return;const n=e;Object(i.f)(()=>n.classList.remove("ion-activated")),t&&r!==e&&e.click(),e=void 0};return Object(o.createGesture)({el:t,gestureName:"buttonActiveDrag",threshold:0,onStart:t=>a(t.currentX,t.currentY,s.a),onMove:t=>a(t.currentX,t.currentY,s.b),onEnd:()=>{l(!0),Object(s.e)(),r=void 0}})}},"74mu":function(t,n,e){"use strict";e.d(n,"a",(function(){return o})),e.d(n,"b",(function(){return s})),e.d(n,"c",(function(){return i})),e.d(n,"d",(function(){return a}));const i=(t,n)=>null!==n.closest(t),o=(t,n)=>"string"==typeof t&&t.length>0?Object.assign({"ion-color":!0,["ion-color-"+t]:!0},n):n,s=t=>{const n={};return(t=>void 0!==t?(Array.isArray(t)?t:t.split(" ")).filter(t=>null!=t).map(t=>t.trim()).filter(t=>""!==t):[])(t).forEach(t=>n[t]=!0),n},r=/^[a-z][a-z0-9+\-.]*:/,a=async(t,n,e,i)=>{if(null!=t&&"#"!==t[0]&&!r.test(t)){const o=document.querySelector("ion-router");if(o)return null!=n&&n.preventDefault(),o.push(t,e,i)}return!1}},Qe3P:function(t,n,e){"use strict";e.d(n,"a",(function(){return h}));var i=e("2Vo4"),o=e("XNiG"),s=e("LRne"),r=e("lJxs"),a=e("fXoL"),c=e("AytR"),l=e("tk/3");let p=(()=>{class t{constructor(t){this.http=t,this.URL=c.a.url2}getCities(){return this.http.get(this.URL+"/locations/all")}getPaths(t,n){return this.http.get(`${this.URL}/routes?from=${t}&to=${n}`,{observe:"response"})}}return t.\u0275fac=function(n){return new(n||t)(a.Qb(l.a))},t.\u0275prov=a.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var u=e("TEn/"),b=e("tyNb");const d=new Map;d.set("Ground route","../../assets/images/groundWay.png"),d.set("Mixed route","../../assets/images/mixedWay.png"),d.set("Flying route","../../assets/images/flightWay.png");var m=function(t){return t.FLIGHT='<span class="material-icons">\n  flight\n  </span>',t.BUS='<span class="material-icons">\n  directions_bus\n  </span>',t.TRAIN='<span class="material-icons">\n  directions_railway\n  </span>',t.SUBWAY='<span class="material-icons">\n  directions_subway\n  </span>',t.SHIP='<span class="material-icons">\n  directions_boat\n  </span>',t.ONFOOT='<span class="material-icons">\n  directions_walk\n  </span>',t.CAR='<span class="material-icons">\n  directions_car\n  </span>',t.TAXI='<span class="material-icons">\n  local_taxi\n  </span>',t.SHUTTLE='<span class="material-icons">\n  shuttle\n  </span>',t}({});const f=new Map;f.set("Bus",m.BUS),f.set("Train",m.TRAIN),f.set("Ride Share",m.CAR),f.set("Taxi",m.TAXI),f.set("Flight",m.FLIGHT);let h=(()=>{class t{constructor(t,n,e){this.httpSrv=t,this.alertCtrl=n,this.router=e,this.allCities=[],this.pathsSubj$=new i.a([]),this.cleanPathsSubj$=new o.a}getAllCities(){this.citiesSub=this.httpSrv.getCities().subscribe(t=>this.allCities=t)}getStartPointAutocomplete(t){return this.getCitiesAutocomplete(t)}getEndPointAutocomplete(t){return this.getCitiesAutocomplete(t)}getPaths(t,n){this.startPointCity=t,this.endPointCity=n,this.httpSrv.getPaths(t.id,n.id).pipe(Object(r.a)(t=>{let n=t.body;for(let i=1;i<=n.length-1;i++)n[0].duration_minutes===n[i].duration_minutes&&t.body[0].euro_price===t.body[i].euro_price&&(n[i].duration_minutes=0,n[i].euro_price=0);const e=n.filter(t=>"0"!=t.duration_minutes).map(t=>this.transformPath(t));return this.currentPaths=e,e})).subscribe(t=>{if(this.paths=t,0===t.length)return this.errorHandler(),void this.cleanPathsSubj$.next(!0);this.pathsSubj$.next(this.paths)})}getPathDetail(t){return this.currentPaths.find(n=>n.routeType===t)}errorHandler(){console.log("error"),this.alertCtrl.create({header:"An error occurred!",message:"No information fetched. Please try again later.",buttons:[{text:"Okay",handler:()=>{this.router.navigate(["/places/tabs/discover"])}}]}).then(t=>{t.present()})}transformPathDetails(t){return t.map(t=>Object.assign(Object.assign({},t),{duration_minutes:this.transformDuration(t.duration_minutes.toString()),euro_price:this.transformPrice(t.euro_price.toString()),imgUrl:f.get(t.transportation_type)}))}transformPath(t){return Object.assign(Object.assign({},t),{duration_minutes:this.transformDuration(t.duration_minutes.toString()),euro_price:this.transformPrice(t.euro_price.toString()),direct_paths:this.transformPathDetails(t.direct_paths),imgUrl:d.get(t.routeType)})}transformDuration(t){const n=Math.floor(+t/60/24),e=n<1?"":n+"d",i=Math.floor(+t/60-24*n);return e+" "+(i<1?"":i+"h")+" "+(+t-24*n*60-60*i)+"min"}transformPrice(t){const n=Math.floor(+t);return Math.floor(+t-n),t}getCitiesAutocomplete(t){const n=this.allCities.filter(n=>n.name.toLowerCase().indexOf(t.toLowerCase())>-1).map((n,e,i)=>Object.assign(Object.assign({},n),{index:n.name.toLowerCase().indexOf(t.toLowerCase())})).sort((t,n)=>t.index-n.index).map(t=>({id:t.id,name:t.name})).slice(0,10);return Object(s.a)(n)}}return t.\u0275fac=function(n){return new(n||t)(a.Qb(p),a.Qb(u.a),a.Qb(b.g))},t.\u0275prov=a.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},ZaV5:function(t,n,e){"use strict";e.d(n,"a",(function(){return i})),e.d(n,"b",(function(){return o}));const i=async(t,n,e,i,o)=>{if(t)return t.attachViewToDom(n,e,o,i);if("string"!=typeof e&&!(e instanceof HTMLElement))throw new Error("framework delegate is missing");const s="string"==typeof e?n.ownerDocument&&n.ownerDocument.createElement(e):e;return i&&i.forEach(t=>s.classList.add(t)),o&&Object.assign(s,o),n.appendChild(s),s.componentOnReady&&await s.componentOnReady(),s},o=(t,n)=>{if(n){if(t)return t.removeViewFromDom(n.parentElement,n);n.remove()}return Promise.resolve()}},h3R7:function(t,n,e){"use strict";e.d(n,"a",(function(){return i}));const i={bubbles:{dur:1e3,circles:9,fn:(t,n,e)=>{const i=t*n/e-t+"ms",o=2*Math.PI*n/e;return{r:5,style:{top:9*Math.sin(o)+"px",left:9*Math.cos(o)+"px","animation-delay":i}}}},circles:{dur:1e3,circles:8,fn:(t,n,e)=>{const i=n/e,o=t*i-t+"ms",s=2*Math.PI*i;return{r:5,style:{top:9*Math.sin(s)+"px",left:9*Math.cos(s)+"px","animation-delay":o}}}},circular:{dur:1400,elmDuration:!0,circles:1,fn:()=>({r:20,cx:48,cy:48,fill:"none",viewBox:"24 24 48 48",transform:"translate(0,0)",style:{}})},crescent:{dur:750,circles:1,fn:()=>({r:26,style:{}})},dots:{dur:750,circles:3,fn:(t,n)=>({r:6,style:{left:9-9*n+"px","animation-delay":-110*n+"ms"}})},lines:{dur:1e3,lines:12,fn:(t,n,e)=>({y1:17,y2:29,style:{transform:`rotate(${30*n+(n<6?180:-180)}deg)`,"animation-delay":t*n/e-t+"ms"}})},"lines-small":{dur:1e3,lines:12,fn:(t,n,e)=>({y1:12,y2:20,style:{transform:`rotate(${30*n+(n<6?180:-180)}deg)`,"animation-delay":t*n/e-t+"ms"}})}}},nlsp:function(t,n,e){"use strict";e.r(n),e.d(n,"OfferPageModule",(function(){return M}));var i=e("ofXK"),o=e("3Pt+"),s=e("TEn/"),r=e("7EHt"),a=e("tyNb"),c=e("fXoL"),l=e("Qe3P"),p=e("qJoI"),u=e("sYmb");function b(t,n){1&t&&c.Kb(0,"ion-spinner",0)}function d(t,n){if(1&t&&(c.Mb(0,"span",13),c.mc(1),c.Lb()),2&t){const t=n.$implicit;c.zb(1),c.nc(t)}}function m(t,n){if(1&t&&(c.Mb(0,"ion-item"),c.Mb(1,"mat-accordion"),c.Mb(2,"mat-expansion-panel"),c.Mb(3,"mat-expansion-panel-header",12),c.Mb(4,"mat-panel-description"),c.Mb(5,"p",13),c.Mb(6,"b"),c.mc(7),c.Lb(),c.mc(8," \xa0"),c.lc(9,d,2,1,"span",14),c.Lb(),c.Mb(10,"p"),c.Mb(11,"span"),c.mc(12),c.Lb(),c.Kb(13,"span",9),c.Mb(14,"span"),c.Mb(15,"ion-badge",0),c.mc(16),c.Xb(17,"currency"),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Kb(18,"app-details",15),c.Lb(),c.Lb(),c.Lb()),2&t){const t=n.$implicit;c.zb(7),c.oc("",t.routeType,":"),c.zb(2),c.cc("ngForOf",t.cities),c.zb(3),c.nc(t.duration_minutes),c.zb(4),c.nc(c.Zb(17,5,t.euro_price,"EUR","symbol","1.2-2")),c.zb(2),c.cc("ways",t.direct_paths)}}function f(t,n){if(1&t){const t=c.Nb();c.Mb(0,"ion-grid"),c.Mb(1,"ion-row"),c.Mb(2,"ion-col",6),c.Mb(3,"ion-button",7),c.Ub("click",(function(){return c.fc(t),c.Wb().toSearchPage()})),c.mc(4),c.Xb(5,"translate"),c.Lb(),c.Lb(),c.Lb(),c.Mb(6,"ion-row"),c.Mb(7,"ion-col",8),c.Mb(8,"ion-label"),c.Mb(9,"p"),c.Mb(10,"span"),c.mc(11),c.Lb(),c.Kb(12,"span",9),c.Kb(13,"ion-icon",10),c.Kb(14,"span",9),c.Mb(15,"span"),c.mc(16),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Mb(17,"ion-row"),c.Mb(18,"ion-col",8),c.lc(19,m,19,10,"ion-item",11),c.Lb(),c.Lb(),c.Lb()}if(2&t){const t=c.Wb();c.zb(4),c.nc(c.Yb(5,4,"OFFER.NewSearch")),c.zb(7),c.nc(t.startPointCity.name),c.zb(5),c.nc(t.endPointCity.name),c.zb(3),c.cc("ngForOf",t.routs)}}const h=[{path:"",component:(()=>{class t{constructor(t,n){this.navCtrl=t,this.placesSrv=n}ngOnInit(){this.isLoading=!0,this.paths=this.placesSrv.pathsSubj$.subscribe(t=>{this.startPointCity=this.placesSrv.startPointCity,this.endPointCity=this.placesSrv.endPointCity,this.routs=t,this.routs=this.routs.map(t=>Object.assign(Object.assign({},t),{cities:this.getCities(t)})),this.isLoading=!1})}toSearchPage(){this.navCtrl.navigateBack("places/tabs/discover")}getCities(t){const n=new Set;return t.direct_paths.forEach(t=>{n.add(t.from),n.add(t.to)}),console.log("cities",n),Array.from(n)}}return t.\u0275fac=function(n){return new(n||t)(c.Jb(s.O),c.Jb(l.a))},t.\u0275cmp=c.Db({type:t,selectors:[["app-offer"]],decls:11,vars:5,consts:[["color","primary"],["slot","start"],["defaultHref","/places/tabs/discover"],[1,"text-center"],["color","primary",4,"ngIf"],[4,"ngIf"],["size","3","offset","8"],["fill","clear",3,"click"],["size","12","size-sm","8","offset-sm","2"],[1,"spacer"],["name","arrow-forward-outline"],[4,"ngFor","ngForOf"],["expandedHeight","*","collapsedHeight","*"],[1,"city"],["class","city",4,"ngFor","ngForOf"],[3,"ways"]],template:function(t,n){1&t&&(c.Mb(0,"ion-header"),c.Mb(1,"ion-toolbar",0),c.Mb(2,"ion-buttons",1),c.Kb(3,"ion-back-button",2),c.Lb(),c.Mb(4,"ion-title"),c.mc(5),c.Xb(6,"translate"),c.Lb(),c.Lb(),c.Lb(),c.Mb(7,"ion-content"),c.Mb(8,"div",3),c.lc(9,b,1,0,"ion-spinner",4),c.Lb(),c.lc(10,f,20,6,"ion-grid",5),c.Lb()),2&t&&(c.zb(5),c.nc(c.Yb(6,3,"OFFER.AvailablePaths")),c.zb(4),c.cc("ngIf",n.isLoading),c.zb(1),c.cc("ngIf",!n.isLoading))},directives:[s.q,s.L,s.h,s.d,s.e,s.K,s.o,i.k,s.G,s.p,s.D,s.n,s.g,s.y,s.r,i.j,s.u,r.a,r.c,r.e,r.d,s.f,p.a],pipes:[u.c,i.c],styles:['p[_ngcontent-%COMP%]{display:flex}mat-accordion[_ngcontent-%COMP%]{width:100%}mat-header[_ngcontent-%COMP%]{padding:5px}mat-panel-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-primary)}.mat-expansion-panel-header[_ngcontent-%COMP%]{height:auto!important;padding:0}mat-panel-description[_ngcontent-%COMP%]{flex-direction:column;width:100%}mat-panel-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-between}mat-panel-description[_ngcontent-%COMP%]   p.city[_ngcontent-%COMP%]{font-size:.8rem;display:inline-block;width:100%;color:var(--ion-color-secondary);font-weight:lighter;font-style:italic;white-space:normal;line-height:1.2}.city[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{content:" > ";display:inline}.city[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child:after{content:none}ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;justify-content:space-around;background-color:#dcdcdc;padding:1rem}']}),t})()}];let g=(()=>{class t{}return t.\u0275mod=c.Hb({type:t}),t.\u0275inj=c.Gb({factory:function(n){return new(n||t)},imports:[[a.i.forChild(h)],a.i]}),t})();var y=e("PCNd");let M=(()=>{class t{}return t.\u0275mod=c.Hb({type:t}),t.\u0275inj=c.Gb({factory:function(n){return new(n||t)},imports:[[i.b,o.a,s.M,g,y.a,r.b]]}),t})()},qJoI:function(t,n,e){"use strict";e.d(n,"a",(function(){return l}));var i=e("fXoL"),o=e("tyNb"),s=e("TEn/"),r=e("Qe3P"),a=e("ofXK");function c(t,n){if(1&t){const t=i.Nb();i.Mb(0,"ion-item-sliding",null,1),i.Mb(2,"ion-item",2),i.Mb(3,"ion-avatar",3),i.Kb(4,"span",4),i.Lb(),i.Mb(5,"ion-label"),i.Mb(6,"p"),i.Kb(7,"span",5),i.mc(8),i.Kb(9,"span",5),i.Lb(),i.Mb(10,"p"),i.mc(11),i.Kb(12,"span",5),i.Kb(13,"ion-icon",6),i.Kb(14,"span",5),i.mc(15),i.Lb(),i.Mb(16,"p"),i.Mb(17,"span"),i.mc(18),i.Lb(),i.Kb(19,"span",5),i.Mb(20,"span"),i.Mb(21,"ion-badge",7),i.mc(22),i.Xb(23,"currency"),i.Lb(),i.Lb(),i.Lb(),i.Lb(),i.Lb(),i.Mb(24,"ion-item-options",8),i.Mb(25,"ion-item-option",9),i.Ub("click",(function(){i.fc(t);const n=i.ec(1);return i.Wb().onGoToMap(n)})),i.Kb(26,"ion-icon",10),i.Lb(),i.Lb(),i.Lb()}if(2&t){const t=n.$implicit;i.zb(4),i.cc("innerHTML",t.imgUrl,i.gc),i.zb(4),i.nc(t.transportation_type),i.zb(3),i.oc("",t.from," "),i.zb(4),i.oc(" ",t.to," "),i.zb(3),i.nc(t.duration_minutes),i.zb(4),i.nc(i.Zb(23,6,t.euro_price,"EUR","symbol","1.2-2"))}}let l=(()=>{class t{constructor(t,n,e){this.route=t,this.navCtrl=n,this.placesSrv=e}ngOnInit(){console.log("ways",this.ways),this.startPointCityName=this.placesSrv.startPointCity.name,this.endPointCityName=this.placesSrv.endPointCity.name}onGoToMap(t){t.close(),console.log("Editing item")}}return t.\u0275fac=function(n){return new(n||t)(i.Jb(o.a),i.Jb(s.O),i.Jb(r.a))},t.\u0275cmp=i.Db({type:t,selectors:[["app-details"]],inputs:{ways:"ways"},decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],["slidingItem",""],[1,"no-padding"],["slot","start"],[1,"icon",3,"innerHTML"],[1,"spacer"],["name","arrow-forward"],["color","primary"],["side","end"],["color","secondary",3,"click"],["name","eye-sharp","slot","icon-only"]],template:function(t,n){1&t&&(i.Mb(0,"ion-list"),i.lc(1,c,27,11,"ion-item-sliding",0),i.Lb()),2&t&&(i.zb(1),i.cc("ngForOf",n.ways))},directives:[s.z,a.j,s.x,s.u,s.c,s.y,s.r,s.f,s.w,s.v],pipes:[a.c],styles:["p[_ngcontent-%COMP%]{display:flex}span.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.icon[_ngcontent-%COMP%]{color:var(--ion-color-secondary)}.item-avatar[_ngcontent-%COMP%]{width:100%!important;height:100%!important;max-width:40px!important;max-height:40px!important}"]}),t})()},qULd:function(t,n,e){"use strict";e.d(n,"a",(function(){return s})),e.d(n,"b",(function(){return r})),e.d(n,"c",(function(){return o})),e.d(n,"d",(function(){return c})),e.d(n,"e",(function(){return a}));const i={getEngine(){const t=window;return t.TapticEngine||t.Capacitor&&t.Capacitor.isPluginAvailable("Haptics")&&t.Capacitor.Plugins.Haptics},available(){return!!this.getEngine()},isCordova:()=>!!window.TapticEngine,isCapacitor:()=>!!window.Capacitor,impact(t){const n=this.getEngine();if(!n)return;const e=this.isCapacitor()?t.style.toUpperCase():t.style;n.impact({style:e})},notification(t){const n=this.getEngine();if(!n)return;const e=this.isCapacitor()?t.style.toUpperCase():t.style;n.notification({style:e})},selection(){this.impact({style:"light"})},selectionStart(){const t=this.getEngine();t&&(this.isCapacitor()?t.selectionStart():t.gestureSelectionStart())},selectionChanged(){const t=this.getEngine();t&&(this.isCapacitor()?t.selectionChanged():t.gestureSelectionChanged())},selectionEnd(){const t=this.getEngine();t&&(this.isCapacitor()?t.selectionEnd():t.gestureSelectionEnd())}},o=()=>{i.selection()},s=()=>{i.selectionStart()},r=()=>{i.selectionChanged()},a=()=>{i.selectionEnd()},c=t=>{i.impact(t)}}}]);