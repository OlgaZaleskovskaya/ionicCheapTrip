(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"0/6H":function(t,n,e){"use strict";e.d(n,"a",(function(){return r}));var i=e("A36C"),o=e("iWo5"),s=e("qULd");const r=(t,n)=>{let e,r;const a=(t,i,o)=>{if("undefined"==typeof document)return;const s=document.elementFromPoint(t,i);s&&n(s)?s!==e&&(l(),c(s,o)):l()},c=(t,n)=>{e=t,r||(r=e);const o=e;Object(i.f)(()=>o.classList.add("ion-activated")),n()},l=(t=!1)=>{if(!e)return;const n=e;Object(i.f)(()=>n.classList.remove("ion-activated")),t&&r!==e&&e.click(),e=void 0};return Object(o.createGesture)({el:t,gestureName:"buttonActiveDrag",threshold:0,onStart:t=>a(t.currentX,t.currentY,s.a),onMove:t=>a(t.currentX,t.currentY,s.b),onEnd:()=>{l(!0),Object(s.e)(),r=void 0}})}},"74mu":function(t,n,e){"use strict";e.d(n,"a",(function(){return o})),e.d(n,"b",(function(){return s})),e.d(n,"c",(function(){return i})),e.d(n,"d",(function(){return a}));const i=(t,n)=>null!==n.closest(t),o=(t,n)=>"string"==typeof t&&t.length>0?Object.assign({"ion-color":!0,["ion-color-"+t]:!0},n):n,s=t=>{const n={};return(t=>void 0!==t?(Array.isArray(t)?t:t.split(" ")).filter(t=>null!=t).map(t=>t.trim()).filter(t=>""!==t):[])(t).forEach(t=>n[t]=!0),n},r=/^[a-z][a-z0-9+\-.]*:/,a=async(t,n,e,i)=>{if(null!=t&&"#"!==t[0]&&!r.test(t)){const o=document.querySelector("ion-router");if(o)return null!=n&&n.preventDefault(),o.push(t,e,i)}return!1}},Qe3P:function(t,n,e){"use strict";e.d(n,"a",(function(){return y}));var i=e("2Vo4"),o=e("XNiG"),s=e("LRne"),r=e("vkgz"),a=e("lJxs"),c=e("fXoL"),l=e("AytR"),p=e("tk/3");let u=(()=>{class t{constructor(t){this.http=t,this.URL=l.a.url2}getCities(){return this.http.get(this.URL+"/locations/all")}getPaths(t,n){return this.http.get(`${this.URL}/routes?from=${t}&to=${n}`,{observe:"response"})}}return t.\u0275fac=function(n){return new(n||t)(c.Qb(p.a))},t.\u0275prov=c.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var b=e("TEn/"),d=e("tyNb");const h=new Map;h.set("Ground route","../../assets/images/groundWay.png"),h.set("Mixed route","../../assets/images/mixedWay.png"),h.set("Flying route","../../assets/images/flightWay.png");var m=function(t){return t.FLIGHT='<span class="material-icons">\n  flight\n  </span>',t.BUS='<span class="material-icons">\n  directions_bus\n  </span>',t.TRAIN='<span class="material-icons">\n  directions_railway\n  </span>',t.SUBWAY='<span class="material-icons">\n  directions_subway\n  </span>',t.SHIP='<span class="material-icons">\n  directions_boat\n  </span>',t.ONFOOT='<span class="material-icons">\n  directions_walk\n  </span>',t.CAR='<span class="material-icons">\n  directions_car\n  </span>',t.TAXI='<span class="material-icons">\n  local_taxi\n  </span>',t.SHUTTLE='<span class="material-icons">\n  shuttle\n  </span>',t}({});const f=new Map;f.set("Server Error",{header:" Oops!",message:"Pss! Our server is sleeping now. Please come back later.",button:"Close"}),f.set("No info",{header:" Oh No!",message:"Sorry, the data we have accumulated is not enough to build a route between the indicated cities. Try changing your request.",button:"Back"}),f.set("Latin Letters",{header:" Oh No!",message:"Sorry, the data we have accumulated is not enough to build a route between the indicated cities. Only Latin letters are permitted",button:"Back"});const g=new Map;g.set("Bus",m.BUS),g.set("Train",m.TRAIN),g.set("Ride Share",m.CAR),g.set("Taxi",m.TAXI),g.set("Flight",m.FLIGHT);let y=(()=>{class t{constructor(t,n,e){this.httpSrv=t,this.alertCtrl=n,this.router=e,this.allCities=[],this.pathsSubj$=new i.a([]),this.cleanPathsSubj$=new o.a}getAllCities(){this.citiesSub=this.httpSrv.getCities().subscribe(t=>this.allCities=t)}getStartPointAutocomplete(t){return this.getCitiesAutocomplete(t).pipe(Object(r.a)(n=>{t.match(/^[A-Za-z0-9]+$/)?0==n.length&&this.errorHandler("No info"):this.errorHandler("Latin Letters")}))}getEndPointAutocomplete(t){return this.getCitiesAutocomplete(t).pipe(Object(r.a)(n=>{t.match(/^[A-Za-z0-9]+$/)?0==n.length&&this.errorHandler("No info"):this.errorHandler("Latin Letters")}))}getPaths(t,n){this.startPointCity=t,this.endPointCity=n,this.httpSrv.getPaths(t.id,n.id).pipe(Object(a.a)(t=>{let n=t.body;for(let i=1;i<=n.length-1;i++)n[0].duration_minutes===n[i].duration_minutes&&t.body[0].euro_price===t.body[i].euro_price&&(n[i].duration_minutes=0,n[i].euro_price=0);const e=n.filter(t=>"0"!=t.duration_minutes).map(t=>this.transformPath(t));return this.currentPaths=e,e})).subscribe(t=>{if(this.paths=t,0===t.length)return this.errorHandler("No info"),this.cleanPathsSubj$.next(!0),void this.pathsSubj$.next([]);this.pathsSubj$.next(this.paths)})}getPathDetail(t){return this.currentPaths.find(n=>n.routeType===t)}errorHandler(t){this.alertCtrl.create({header:f.get(t).header,message:f.get(t).message,buttons:[{text:f.get(t).button,handler:()=>{this.router.navigate(["/places/tabs/discover"])}}]}).then(t=>{t.present()})}transformPathDetails(t){return t.map(t=>Object.assign(Object.assign({},t),{duration_minutes:this.transformDuration(t.duration_minutes.toString()),euro_price:this.transformPrice(t.euro_price.toString()),imgUrl:g.get(t.transportation_type)}))}transformPath(t){return Object.assign(Object.assign({},t),{duration_minutes:this.transformDuration(t.duration_minutes.toString()),euro_price:this.transformPrice(t.euro_price.toString()),direct_paths:this.transformPathDetails(t.direct_paths),imgUrl:h.get(t.routeType)})}transformDuration(t){const n=Math.floor(+t/60/24),e=n<1?"":n+"d",i=Math.floor(+t/60-24*n);return e+" "+(i<1?"":i+"h")+" "+(+t-24*n*60-60*i)+"min"}transformPrice(t){const n=Math.floor(+t);return Math.floor(+t-n),t}getCitiesAutocomplete(t){const n=this.allCities.filter(n=>n.name.toLowerCase().indexOf(t.toLowerCase())>-1).map((n,e,i)=>Object.assign(Object.assign({},n),{index:n.name.toLowerCase().indexOf(t.toLowerCase())})).sort((t,n)=>t.index-n.index).map(t=>({id:t.id,name:t.name})).slice(0,10);return Object(s.a)(n)}}return t.\u0275fac=function(n){return new(n||t)(c.Qb(u),c.Qb(b.a),c.Qb(d.g))},t.\u0275prov=c.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},ZaV5:function(t,n,e){"use strict";e.d(n,"a",(function(){return i})),e.d(n,"b",(function(){return o}));const i=async(t,n,e,i,o)=>{if(t)return t.attachViewToDom(n,e,o,i);if("string"!=typeof e&&!(e instanceof HTMLElement))throw new Error("framework delegate is missing");const s="string"==typeof e?n.ownerDocument&&n.ownerDocument.createElement(e):e;return i&&i.forEach(t=>s.classList.add(t)),o&&Object.assign(s,o),n.appendChild(s),s.componentOnReady&&await s.componentOnReady(),s},o=(t,n)=>{if(n){if(t)return t.removeViewFromDom(n.parentElement,n);n.remove()}return Promise.resolve()}},h3R7:function(t,n,e){"use strict";e.d(n,"a",(function(){return i}));const i={bubbles:{dur:1e3,circles:9,fn:(t,n,e)=>{const i=t*n/e-t+"ms",o=2*Math.PI*n/e;return{r:5,style:{top:9*Math.sin(o)+"px",left:9*Math.cos(o)+"px","animation-delay":i}}}},circles:{dur:1e3,circles:8,fn:(t,n,e)=>{const i=n/e,o=t*i-t+"ms",s=2*Math.PI*i;return{r:5,style:{top:9*Math.sin(s)+"px",left:9*Math.cos(s)+"px","animation-delay":o}}}},circular:{dur:1400,elmDuration:!0,circles:1,fn:()=>({r:20,cx:48,cy:48,fill:"none",viewBox:"24 24 48 48",transform:"translate(0,0)",style:{}})},crescent:{dur:750,circles:1,fn:()=>({r:26,style:{}})},dots:{dur:750,circles:3,fn:(t,n)=>({r:6,style:{left:9-9*n+"px","animation-delay":-110*n+"ms"}})},lines:{dur:1e3,lines:12,fn:(t,n,e)=>({y1:17,y2:29,style:{transform:`rotate(${30*n+(n<6?180:-180)}deg)`,"animation-delay":t*n/e-t+"ms"}})},"lines-small":{dur:1e3,lines:12,fn:(t,n,e)=>({y1:12,y2:20,style:{transform:`rotate(${30*n+(n<6?180:-180)}deg)`,"animation-delay":t*n/e-t+"ms"}})}}},nlsp:function(t,n,e){"use strict";e.r(n),e.d(n,"OfferPageModule",(function(){return C}));var i=e("ofXK"),o=e("3Pt+"),s=e("TEn/"),r=e("7EHt"),a=e("tyNb"),c=e("fXoL"),l=e("Qe3P"),p=e("qJoI"),u=e("sYmb");function b(t,n){1&t&&c.Kb(0,"ion-spinner",0)}function d(t,n){1&t&&c.Kb(0,"span",17),2&t&&c.cc("innerHTML",n.$implicit,c.hc)}function h(t,n){if(1&t&&(c.Mb(0,"span",14),c.nc(1),c.Lb()),2&t){const t=n.$implicit;c.zb(1),c.oc(t)}}function m(t,n){if(1&t&&(c.Mb(0,"ion-item"),c.Mb(1,"mat-accordion"),c.Mb(2,"mat-expansion-panel"),c.Mb(3,"mat-expansion-panel-header",12),c.Mb(4,"mat-panel-title"),c.Mb(5,"p"),c.mc(6,d,1,1,"span",13),c.Lb(),c.Lb(),c.Mb(7,"mat-panel-description"),c.Mb(8,"p",14),c.Mb(9,"b"),c.nc(10),c.Lb(),c.nc(11," \xa0"),c.mc(12,h,2,1,"span",15),c.Lb(),c.Mb(13,"p"),c.Mb(14,"span"),c.nc(15),c.Lb(),c.Kb(16,"span",9),c.Mb(17,"span"),c.Mb(18,"ion-badge",0),c.nc(19),c.Xb(20,"currency"),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Kb(21,"app-details",16),c.Lb(),c.Lb(),c.Lb()),2&t){const t=n.$implicit;c.zb(6),c.cc("ngForOf",t.icons),c.zb(4),c.pc("",t.routeType,":"),c.zb(2),c.cc("ngForOf",t.cities),c.zb(3),c.oc(t.duration_minutes),c.zb(4),c.oc(c.Zb(20,6,t.euro_price,"EUR","symbol","1.2-2")),c.zb(2),c.cc("ways",t.direct_paths)}}function f(t,n){if(1&t){const t=c.Nb();c.Mb(0,"ion-grid"),c.Mb(1,"ion-row"),c.Mb(2,"ion-col",6),c.Mb(3,"ion-button",7),c.Ub("click",(function(){return c.gc(t),c.Wb().toSearchPage()})),c.nc(4),c.Xb(5,"translate"),c.Lb(),c.Lb(),c.Lb(),c.Mb(6,"ion-row"),c.Mb(7,"ion-col",8),c.Mb(8,"ion-label"),c.Mb(9,"p"),c.Mb(10,"span"),c.nc(11),c.Lb(),c.Kb(12,"span",9),c.Kb(13,"ion-icon",10),c.Kb(14,"span",9),c.Mb(15,"span"),c.nc(16),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Mb(17,"ion-row"),c.Mb(18,"ion-col",8),c.mc(19,m,22,11,"ion-item",11),c.Lb(),c.Lb(),c.Lb()}if(2&t){const t=c.Wb();c.zb(4),c.oc(c.Yb(5,4,"OFFER.NewSearch")),c.zb(7),c.oc(t.startPointCity.name),c.zb(5),c.oc(t.endPointCity.name),c.zb(3),c.cc("ngForOf",t.routs)}}const g=[{path:"",component:(()=>{class t{constructor(t,n){this.navCtrl=t,this.placesSrv=n}ngOnInit(){this.isLoading=!0,this.paths=this.placesSrv.pathsSubj$.subscribe(t=>{this.startPointCity=this.placesSrv.startPointCity,this.endPointCity=this.placesSrv.endPointCity,this.routs=t,this.routs=this.routs.map(t=>Object.assign(Object.assign({},t),{cities:this.getCities(t),icons:this.getTransportTypes(t)})),this.isLoading=!1})}toSearchPage(){this.navCtrl.navigateBack("places/tabs/discover")}getCities(t){const n=new Set;return t.direct_paths.forEach(t=>{n.add(t.from),n.add(t.to)}),Array.from(n)}getTransportTypes(t){return t.direct_paths.map(t=>t.imgUrl)}}return t.\u0275fac=function(n){return new(n||t)(c.Jb(s.Q),c.Jb(l.a))},t.\u0275cmp=c.Db({type:t,selectors:[["app-offer"]],decls:11,vars:5,consts:[["color","primary"],["slot","start"],["defaultHref","/places/tabs/discover"],[1,"text-center"],["color","primary",4,"ngIf"],[4,"ngIf"],["size","3","offset","8"],["fill","clear",3,"click"],["size","12","size-sm","8","offset-sm","2"],[1,"spacer"],["name","arrow-forward-outline"],[4,"ngFor","ngForOf"],["expandedHeight","*","collapsedHeight","*"],[3,"innerHTML",4,"ngFor","ngForOf"],[1,"city"],["class","city",4,"ngFor","ngForOf"],[3,"ways"],[3,"innerHTML"]],template:function(t,n){1&t&&(c.Mb(0,"ion-header"),c.Mb(1,"ion-toolbar",0),c.Mb(2,"ion-buttons",1),c.Kb(3,"ion-back-button",2),c.Lb(),c.Mb(4,"ion-title"),c.nc(5),c.Xb(6,"translate"),c.Lb(),c.Lb(),c.Lb(),c.Mb(7,"ion-content"),c.Mb(8,"div",3),c.mc(9,b,1,0,"ion-spinner",4),c.Lb(),c.mc(10,f,20,6,"ion-grid",5),c.Lb()),2&t&&(c.zb(5),c.oc(c.Yb(6,3,"OFFER.AvailablePaths")),c.zb(4),c.cc("ngIf",n.isLoading),c.zb(1),c.cc("ngIf",!n.isLoading))},directives:[s.q,s.N,s.h,s.d,s.e,s.M,s.o,i.k,s.H,s.p,s.E,s.n,s.g,s.y,s.r,i.j,s.u,r.a,r.c,r.e,r.f,r.d,s.f,p.a],pipes:[u.c,i.c],styles:['p[_ngcontent-%COMP%]{display:flex}mat-accordion[_ngcontent-%COMP%]{width:100%}mat-header[_ngcontent-%COMP%]{padding:5px}mat-panel-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-primary);display:flex;flex-direction:column}mat-panel-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.mat-expansion-panel-header[_ngcontent-%COMP%]{height:auto!important;padding:0}mat-panel-description[_ngcontent-%COMP%]{flex-direction:column;width:100%}mat-panel-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-between}mat-panel-description[_ngcontent-%COMP%]   p.city[_ngcontent-%COMP%]{font-size:.8rem;display:inline-block;width:100%;color:var(--ion-color-secondary);font-weight:lighter;font-style:italic;white-space:normal;line-height:1.2}.city[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{content:" > ";display:inline}.city[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child:after{content:none}ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;justify-content:space-around;background-color:#dcdcdc;padding:1rem}']}),t})()}];let y=(()=>{class t{}return t.\u0275mod=c.Hb({type:t}),t.\u0275inj=c.Gb({factory:function(n){return new(n||t)},imports:[[a.i.forChild(g)],a.i]}),t})();var M=e("PCNd");let C=(()=>{class t{}return t.\u0275mod=c.Hb({type:t}),t.\u0275inj=c.Gb({factory:function(n){return new(n||t)},imports:[[i.b,o.a,s.O,y,M.a,r.b]]}),t})()},qJoI:function(t,n,e){"use strict";e.d(n,"a",(function(){return l}));var i=e("fXoL"),o=e("tyNb"),s=e("TEn/"),r=e("Qe3P"),a=e("ofXK");function c(t,n){if(1&t){const t=i.Nb();i.Mb(0,"ion-item-sliding",null,1),i.Mb(2,"ion-item",2),i.Mb(3,"ion-label"),i.Mb(4,"p"),i.Kb(5,"span",3),i.nc(6),i.Kb(7,"span",3),i.Lb(),i.Mb(8,"p"),i.nc(9),i.Kb(10,"span",3),i.Kb(11,"ion-icon",4),i.Kb(12,"span",3),i.nc(13),i.Lb(),i.Mb(14,"p"),i.Mb(15,"span"),i.nc(16),i.Lb(),i.Kb(17,"span",3),i.Mb(18,"span"),i.Mb(19,"ion-badge",5),i.nc(20),i.Xb(21,"currency"),i.Lb(),i.Lb(),i.Lb(),i.Lb(),i.Lb(),i.Mb(22,"ion-item-options",6),i.Mb(23,"ion-item-option",7),i.Ub("click",(function(){i.gc(t);const n=i.fc(1);return i.Wb().onGoToMap(n)})),i.Kb(24,"ion-icon",8),i.Lb(),i.Lb(),i.Lb()}if(2&t){const t=n.$implicit;i.zb(6),i.oc(t.transportation_type),i.zb(3),i.pc("",t.from," "),i.zb(4),i.pc(" ",t.to," "),i.zb(3),i.oc(t.duration_minutes),i.zb(4),i.oc(i.Zb(21,5,t.euro_price,"EUR","symbol","1.2-2"))}}let l=(()=>{class t{constructor(t,n,e){this.route=t,this.navCtrl=n,this.placesSrv=e}ngOnInit(){this.startPointCityName=this.placesSrv.startPointCity.name,this.endPointCityName=this.placesSrv.endPointCity.name}onGoToMap(t){t.close(),console.log("Editing item")}}return t.\u0275fac=function(n){return new(n||t)(i.Jb(o.a),i.Jb(s.Q),i.Jb(r.a))},t.\u0275cmp=i.Db({type:t,selectors:[["app-details"]],inputs:{ways:"ways"},decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],["slidingItem",""],[1,"no-padding"],[1,"spacer"],["name","arrow-forward"],["color","primary"],["side","end"],["color","secondary",3,"click"],["name","eye-sharp","slot","icon-only"]],template:function(t,n){1&t&&(i.Mb(0,"ion-list"),i.mc(1,c,25,10,"ion-item-sliding",0),i.Lb()),2&t&&(i.zb(1),i.cc("ngForOf",n.ways))},directives:[s.z,a.j,s.x,s.u,s.y,s.r,s.f,s.w,s.v],pipes:[a.c],styles:["p[_ngcontent-%COMP%]{display:flex}span.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.icon[_ngcontent-%COMP%]{color:var(--ion-color-secondary)}.item-avatar[_ngcontent-%COMP%]{width:100%!important;height:100%!important;max-width:40px!important;max-height:40px!important}"]}),t})()},qULd:function(t,n,e){"use strict";e.d(n,"a",(function(){return s})),e.d(n,"b",(function(){return r})),e.d(n,"c",(function(){return o})),e.d(n,"d",(function(){return c})),e.d(n,"e",(function(){return a}));const i={getEngine(){const t=window;return t.TapticEngine||t.Capacitor&&t.Capacitor.isPluginAvailable("Haptics")&&t.Capacitor.Plugins.Haptics},available(){return!!this.getEngine()},isCordova:()=>!!window.TapticEngine,isCapacitor:()=>!!window.Capacitor,impact(t){const n=this.getEngine();if(!n)return;const e=this.isCapacitor()?t.style.toUpperCase():t.style;n.impact({style:e})},notification(t){const n=this.getEngine();if(!n)return;const e=this.isCapacitor()?t.style.toUpperCase():t.style;n.notification({style:e})},selection(){this.impact({style:"light"})},selectionStart(){const t=this.getEngine();t&&(this.isCapacitor()?t.selectionStart():t.gestureSelectionStart())},selectionChanged(){const t=this.getEngine();t&&(this.isCapacitor()?t.selectionChanged():t.gestureSelectionChanged())},selectionEnd(){const t=this.getEngine();t&&(this.isCapacitor()?t.selectionEnd():t.gestureSelectionEnd())}},o=()=>{i.selection()},s=()=>{i.selectionStart()},r=()=>{i.selectionChanged()},a=()=>{i.selectionEnd()},c=t=>{i.impact(t)}}}]);