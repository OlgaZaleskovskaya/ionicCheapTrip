{"version":3,"sources":["webpack:///src/app/places/discover/details/details.page.html","webpack:///src/app/places/discover/offer/offer.page.html","webpack:///src/app/places/discover/details/details.page.scss","webpack:///src/app/places/discover/details/details.page.ts","webpack:///src/app/places/discover/offer/offer-routing.module.ts","webpack:///src/app/places/discover/offer/offer.module.ts","webpack:///src/app/places/discover/offer/offer.page.scss","webpack:///src/app/places/discover/offer/offer.page.ts"],"names":["DetailsPage","route","navCtrl","placesSrv","console","info","currency","startPointCityName","startPointCity","name","endPointCityName","endPointCity","slidingItem","close","log","selector","template","routes","path","component","OfferPageRoutingModule","imports","forChild","exports","OfferPageModule","declarations","OfferPage","isLoading","currentCurrency","currencyChanged","currencyChanged$","subscribe","res","routs","recalculatePrice","rate","previousRate","paths","pathsSubj$","map","rout","cities","getCities","icons","getTransportTypes","navigateBack","citiesSet","Set","direct_paths","forEach","r","add","from","to","Array","transportIcons","imgUrl","euro_price"],"mappings":"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","file":"default~discover-offer-offer-module~offer-offer-module-es5.js","sourcesContent":["export default \"\\r\\n  <ion-list>\\r\\n<!--    <ion- item-sliding  class=\\\"ion-no-padding\\\" *ngFor=\\\"let way of ways\\\" #slidingItem> -->\\r\\n      <ion-item class=\\\"ion-no-padding\\\" *ngFor=\\\"let way of ways\\\">\\r\\n   \\r\\n        <ion-label class=\\\"ion-no-margin\\\">\\r\\n          <p class=\\\"transport\\\" > <span class=\\\"spacer\\\"></span>{{way.transportation_type}}<span class=\\\"spacer\\\"></span></p>\\r\\n          <p class=\\\"rout\\\"><span>{{way.from}}</span>\\r\\n            <ion-icon name=\\\"arrow-forward\\\"></ion-icon>\\r\\n           <span>{{way.to}}</span> \\r\\n          </p>\\r\\n          <p>\\r\\n            <span class=\\\"time\\\">{{way.duration_minutes}}</span>\\r\\n            <span class=\\\"spacer\\\"></span>\\r\\n            <span class=\\\"currency\\\">\\r\\n             {{way.euro_price | currency:currency:'symbol-narrow':'1.2-2' }}</span>\\r\\n           \\r\\n\\r\\n          </p>\\r\\n        </ion-label>\\r\\n      </ion-item>\\r\\n   <!--    <ion-item-options side=\\\"end\\\">\\r\\n        <ion-item-option color=\\\"secondary\\\" (click)=\\\"onGoToMap(slidingItem)\\\">\\r\\n          <ion-icon name=\\\"eye-sharp\\\" slot=\\\"icon-only\\\"></ion-icon>\\r\\n        </ion-item-option>\\r\\n      </ion-item-options>\\r\\n\\r\\n    </ion-item-sliding> -->\\r\\n  </ion-list>\\r\\n  <!--  <app-location-picker></app-location-picker> -->\\r\\n \";","export default \"<ion-header>\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button defaultHref=\\\"/places/tabs/discover\\\"></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>{{\\\"OFFER.AvailablePaths\\\"| translate}}</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<app-tools [isHidden]=\\\"true\\\"></app-tools>\\r\\n\\r\\n<ion-content>\\r\\n  <div class=\\\"text-center\\\">\\r\\n    <ion-spinner color=\\\"primary\\\" *ngIf=\\\"isLoading\\\"></ion-spinner>\\r\\n  </div>\\r\\n  <ion-grid *ngIf=\\\"!isLoading\\\">\\r\\n   <!--  <ion-row>\\r\\n      <ion-col size=\\\"6\\\" offset=\\\"6\\\">\\r\\n        <ion-button class=\\\"expand\\\" color=\\\"secondary\\\" expand=\\\"full\\\" (click)=\\\"toSearchPage()\\\" fill=\\\"solid\\\">\\r\\n          {{'OFFER.NewSearch' | translate}}</ion-button>\\r\\n      </ion-col>\\r\\n    </ion-row> -->\\r\\n    <ion-row>\\r\\n      <ion-col size=\\\"12\\\" size-sm=\\\"8\\\" offset-sm=\\\"2\\\">\\r\\n        <ion-label>\\r\\n          <p> <span>{{startPointCity.name}}</span><span class=\\\"spacer\\\"></span>\\r\\n            <ion-icon name=\\\"arrow-forward\\\"></ion-icon><span class=\\\"spacer\\\"></span><span>{{endPointCity.name}}</span>\\r\\n          </p>\\r\\n        </ion-label>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n    <ion-row>\\r\\n      <ion-col size=\\\"12\\\" size-sm=\\\"8\\\" offset-sm=\\\"2\\\">\\r\\n        <ion-item *ngFor=\\\"let path of routs\\\">\\r\\n          <mat-accordion>\\r\\n            <mat-expansion-panel>\\r\\n              <mat-expansion-panel-header expandedHeight=\\\"*\\\" collapsedHeight=\\\"*\\\">\\r\\n                <mat-panel-title>\\r\\n                  <p> <span *ngFor=\\\"let icon of path.icons\\\" [innerHTML]=\\\"icon\\\"></span></p>\\r\\n                </mat-panel-title>\\r\\n                <mat-panel-description>\\r\\n                  <ul class=\\\"city\\\">\\r\\n                    <li *ngFor=\\\"let city of path.cities\\\">{{city}}<ion-icon name=\\\"arrow-forward\\\"></ion-icon></li>\\r\\n                  </ul>\\r\\n                  <p> <span class=\\\"time\\\">{{path.duration_minutes}}</span> <span class=\\\"spacer\\\">\\r\\n                    </span>\\r\\n                    <span>\\r\\n                      <ion-badge color=\\\"primary\\\">{{path.euro_price |currency:currentCurrency:true:'1.2-2'}}</ion-badge>\\r\\n                    </span>\\r\\n                  </p>\\r\\n                </mat-panel-description>\\r\\n              </mat-expansion-panel-header>\\r\\n              <app-details [ways]=\\\"path.direct_paths\\\" [currency]=\\\"currentCurrency\\\"></app-details>\\r\\n            </mat-expansion-panel>\\r\\n          </mat-accordion>\\r\\n          <!--   <ion-label [routerLink]=\\\"['/', 'places', 'tabs', 'discover', path.routeType]\\\">\\r\\n            </ion-label> -->\\r\\n        </ion-item>\\r\\n\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n  </ion-grid>\\r\\n</ion-content>\";","export default \"p {\\n  display: flex;\\n}\\n\\nspan.spacer {\\n  flex: 1 1 auto;\\n}\\n\\n.icon {\\n  color: var(--ion-color-secondary);\\n}\\n\\n.item-avatar {\\n  width: 100% !important;\\n  height: 100% !important;\\n  max-width: 40px !important;\\n  max-height: 40px !important;\\n}\\n\\nion-label p {\\n  color: var(--ion-color-secondary);\\n}\\n\\nion-label p span.currency {\\n  color: var(--ion-color-primary);\\n  display: inline-block;\\n}\\n\\nion-label p.rout {\\n  font-weight: bold;\\n  color: #212121;\\n  justify-content: space-between;\\n}\\n\\nion-label p.rout span {\\n  width: 40%;\\n}\\n\\nion-label p.rout span:last-child {\\n  text-align: right;\\n  justify-self: end;\\n}\\n\\nion-label p.rout ion-icon {\\n  justify-self: center;\\n}\\n\\n:host {\\n  width: 100%;\\n}\\n\\nion-list {\\n  width: 100%;\\n  background-color: rgba(128, 128, 128, 0.3);\\n  margin: 0;\\n}\\n\\n.time {\\n  color: #757575;\\n}\\n\\nion-item {\\n  --inner-padding-end: 0px;\\n  --padding-start:0px\\n\\n  ion-label{\\n    width:100%;\\n     background-color: gray;\\n  } ;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGxhY2VzL2Rpc2NvdmVyL2RldGFpbHMvZGV0YWlscy5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxhQUFBO0FBQ0Y7O0FBQ0E7RUFDRSxjQUFBO0FBRUY7O0FBQ0E7RUFDRSxpQ0FBQTtBQUVGOztBQUNBO0VBQ0Usc0JBQUE7RUFDQSx1QkFBQTtFQUNBLDBCQUFBO0VBQ0EsMkJBQUE7QUFFRjs7QUFDRTtFQUNFLGlDQUFBO0FBRUo7O0FBREk7RUFDRSwrQkFBQTtFQUNBLHFCQUFBO0FBR047O0FBQ0U7RUFDRSxpQkFBQTtFQUNBLGNBQUE7RUFDQSw4QkFBQTtBQUNKOztBQUFJO0VBQ0UsVUFBQTtBQUVOOztBQUFJO0VBQ0MsaUJBQUE7RUFDQSxpQkFBQTtBQUVMOztBQUNJO0VBQ0Usb0JBQUE7QUFDTjs7QUFHQTtFQUNFLFdBQUE7QUFBRjs7QUFFQTtFQUNFLFdBQUE7RUFDQSwwQ0FBQTtFQUNBLFNBQUE7QUFDRjs7QUFHQTtFQUNFLGNBQUE7QUFBRjs7QUFJRTtFQUVDLHdCQUFBO0VBQ0M7OztJQUFBLFVBQUE7S0FBQSxzQkFBQTtFQUFBLEVBQUE7QUFHSiIsImZpbGUiOiJzcmMvYXBwL3BsYWNlcy9kaXNjb3Zlci9kZXRhaWxzL2RldGFpbHMucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsicCB7XHJcbiAgZGlzcGxheTogZmxleDtcclxufVxyXG5zcGFuLnNwYWNlciB7XHJcbiAgZmxleDogMSAxIGF1dG87XHJcbn1cclxuXHJcbi5pY29uIHtcclxuICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLXNlY29uZGFyeSk7XHJcbn1cclxuXHJcbi5pdGVtLWF2YXRhciB7XHJcbiAgd2lkdGg6IDEwMCUgIWltcG9ydGFudDtcclxuICBoZWlnaHQ6IDEwMCUgIWltcG9ydGFudDtcclxuICBtYXgtd2lkdGg6IDQwcHggIWltcG9ydGFudDsgLy9hbnkgc2l6ZVxyXG4gIG1heC1oZWlnaHQ6IDQwcHggIWltcG9ydGFudDsgLy9hbnkgc2l6ZVxyXG59XHJcbmlvbi1sYWJlbCB7XHJcbiAgcCB7XHJcbiAgICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLXNlY29uZGFyeSk7XHJcbiAgICBzcGFuLmN1cnJlbmN5IHtcclxuICAgICAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1wcmltYXJ5KTtcclxuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gICAgIFxyXG4gICAgfVxyXG4gIH1cclxuICBwLnJvdXQge1xyXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgICBjb2xvcjogIzIxMjEyMTtcclxuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcclxuICAgIHNwYW57XHJcbiAgICAgIHdpZHRoOjQwJTtcclxuICAgIH1cclxuICAgIHNwYW46bGFzdC1jaGlsZHtcclxuICAgICB0ZXh0LWFsaWduOiByaWdodDtcclxuICAgICBqdXN0aWZ5LXNlbGY6IGVuZDtcclxuXHJcbiAgICB9XHJcbiAgICBpb24taWNvbntcclxuICAgICAganVzdGlmeS1zZWxmOiBjZW50ZXI7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbjpob3N0e1xyXG4gIHdpZHRoOjEwMCU7XHJcbn1cclxuaW9uLWxpc3R7XHJcbiAgd2lkdGg6MTAwJTtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDEyOCwgMTI4LCAxMjgsIDAuMyk7XHJcbiAgbWFyZ2luOjA7XHJcblxyXG59XHJcblxyXG4udGltZXtcclxuICBjb2xvcjogICM3NTc1NzU7XHJcbn1cclxuXHJcblxyXG4gIGlvbi1pdGVte1xyXG5cclxuICAgLS1pbm5lci1wYWRkaW5nLWVuZDogMHB4O1xyXG4gICAgLS1wYWRkaW5nLXN0YXJ0OjBweFxyXG5cclxuICBcclxuICAgIGlvbi1sYWJlbHtcclxuICAgICAgd2lkdGg6MTAwJTtcclxuICAgICAgIGJhY2tncm91bmQtY29sb3I6IGdyYXk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG5cclxuIl19 */\";","import { Component, Input, OnInit } from \"@angular/core\";\r\nimport { ActivatedRoute } from \"@angular/router\";\r\nimport { IonItemSliding, NavController } from \"@ionic/angular\";\r\nimport { IFetchedPathDetails, IFetchedPaths } from \"../../places.model\";\r\nimport { PlacesService } from \"../../places.service\";\r\n\r\n@Component({\r\n  selector: \"app-details\",\r\n  templateUrl: \"./details.page.html\",\r\n  styleUrls: [\"./details.page.scss\"],\r\n})\r\nexport class DetailsPage implements OnInit {\r\n  rout: IFetchedPaths;\r\n  paths: IFetchedPathDetails[];\r\n  endPointCityName: string;\r\n  startPointCityName: string;\r\n  @Input() ways: Array<any>;\r\n  @Input() currency: string;\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private navCtrl: NavController,\r\n    private placesSrv: PlacesService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n console.info(\"detail\", this.currency);\r\n    this.startPointCityName = this.placesSrv.startPointCity.name;\r\n    this.endPointCityName = this.placesSrv.endPointCity.name;\r\n   /*  this.route.paramMap.subscribe((paramMap) => {\r\n      if (!paramMap.has(\"pathId\")) {\r\n        this.navCtrl.navigateBack(\"/places/tabs/offer\");\r\n        return;\r\n      }\r\n      this.rout = this.placesSrv.getPathDetail(paramMap.get(\"pathId\"));\r\n      this.paths = this.rout.direct_paths;\r\n    }); */\r\n  }\r\n\r\n  onGoToMap(slidingItem: IonItemSliding){\r\n   \r\n      slidingItem.close();\r\n  \r\n      console.log('Editing item');\r\n   \r\n  }\r\n\r\n  \r\n \r\n}\r\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { OfferPage } from './offer.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: OfferPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class OfferPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\nimport {MatExpansionModule} from '@angular/material/expansion';\n\nimport { OfferPageRoutingModule } from './offer-routing.module';\n\nimport { OfferPage } from './offer.page';\nimport { SharedModule } from 'src/app/shared/shared.module';\nimport { DetailsPage } from '../details/details.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    OfferPageRoutingModule, \n    SharedModule,\n    MatExpansionModule\n  ],\n  declarations: [OfferPage, DetailsPage]\n})\nexport class OfferPageModule {}\n","export default \"p {\\n  display: flex;\\n}\\n\\nmat-accordion {\\n  width: 100%;\\n}\\n\\nmat-header {\\n  padding: 1px;\\n}\\n\\nmat-panel-title p {\\n  color: var(--ion-color-secondary);\\n  display: flex;\\n  flex-direction: column;\\n}\\n\\nmat-panel-title p span {\\n  display: block;\\n}\\n\\n.mat-expansion-panel-header {\\n  height: auto !important;\\n  padding: 0;\\n}\\n\\nmat-panel-description {\\n  flex-direction: column;\\n  width: 100%;\\n}\\n\\nmat-panel-description p {\\n  display: flex;\\n  width: 100%;\\n  justify-content: space-between;\\n}\\n\\nmat-panel-description p span.time {\\n  color: #757575;\\n}\\n\\nmat-panel-description ul.city {\\n  font-size: 0.8rem;\\n  width: 100%;\\n  color: #212121;\\n  font-weight: bold;\\n  font-style: italic;\\n  white-space: normal;\\n  line-height: 1.2;\\n  padding: 1px;\\n}\\n\\nmat-panel-description ul.city li {\\n  display: inline;\\n}\\n\\nmat-panel-description ul.city li ion-icon {\\n  position: relative;\\n  top: 0.1rem;\\n  margin-left: 5px;\\n}\\n\\nmat-panel-description ul.city li:last-child ion-icon {\\n  display: none;\\n}\\n\\n/* .city span:after {\\n  content: \\\" > \\\";\\n  display: inline;\\n}\\n.city span:last-child:after {\\n  content: none;\\n} */\\n\\nion-label p {\\n  display: flex;\\n  justify-content: space-around;\\n  background-color: #ffccbc;\\n  padding: 1rem;\\n  color: #212121;\\n  font-weight: bold;\\n  padding: 0 1rem;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGxhY2VzL2Rpc2NvdmVyL29mZmVyL29mZmVyLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGFBQUE7QUFDRjs7QUFFQTtFQUNFLFdBQUE7QUFDRjs7QUFDQTtFQUNFLFlBQUE7QUFFRjs7QUFDRTtFQUNFLGlDQUFBO0VBQ0EsYUFBQTtFQUNBLHNCQUFBO0FBRUo7O0FBREk7RUFDRSxjQUFBO0FBR047O0FBQ0E7RUFDRSx1QkFBQTtFQUVBLFVBQUE7QUFDRjs7QUFDQTtFQUNFLHNCQUFBO0VBQ0EsV0FBQTtBQUVGOztBQURFO0VBQ0UsYUFBQTtFQUNBLFdBQUE7RUFDQSw4QkFBQTtBQUdKOztBQUZJO0VBQ0UsY0FBQTtBQUlOOztBQURFO0VBQ0MsaUJBQUE7RUFFQyxXQUFBO0VBQ0EsY0FBQTtFQUNELGlCQUFBO0VBQ0Msa0JBQUE7RUFDQSxtQkFBQTtFQUNBLGdCQUFBO0VBQ0EsWUFBQTtBQUVKOztBQURJO0VBRUUsZUFBQTtBQUVOOztBQUFNO0VBR0Usa0JBQUE7RUFDQSxXQUFBO0VBQ0EsZ0JBQUE7QUFBUjs7QUFJTTtFQUNFLGFBQUE7QUFGUjs7QUFVQTs7Ozs7O0dBQUE7O0FBU0U7RUFDRSxhQUFBO0VBQ0EsNkJBQUE7RUFDQSx5QkFBQTtFQUNBLGFBQUE7RUFDQSxjQUFBO0VBQ0EsaUJBQUE7RUFDQSxlQUFBO0FBVEoiLCJmaWxlIjoic3JjL2FwcC9wbGFjZXMvZGlzY292ZXIvb2ZmZXIvb2ZmZXIucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsicCB7XHJcbiAgZGlzcGxheTogZmxleDtcclxufVxyXG5cclxubWF0LWFjY29yZGlvbiB7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbn1cclxubWF0LWhlYWRlciB7XHJcbiAgcGFkZGluZzogMXB4O1xyXG59XHJcbm1hdC1wYW5lbC10aXRsZSB7XHJcbiAgcCB7XHJcbiAgICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLXNlY29uZGFyeSk7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICAgIHNwYW4ge1xyXG4gICAgICBkaXNwbGF5OiBibG9jaztcclxuICAgIH1cclxuICB9XHJcbn1cclxuLm1hdC1leHBhbnNpb24tcGFuZWwtaGVhZGVyIHtcclxuICBoZWlnaHQ6IGF1dG8gIWltcG9ydGFudDtcclxuXHJcbiAgcGFkZGluZzogMDtcclxufVxyXG5tYXQtcGFuZWwtZGVzY3JpcHRpb24ge1xyXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgcCB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbiAgICBzcGFuLnRpbWUge1xyXG4gICAgICBjb2xvcjogIzc1NzU3NTtcclxuICAgIH1cclxuICB9XHJcbiAgdWwuY2l0eSB7XHJcbiAgIGZvbnQtc2l6ZTogMC44cmVtO1xyXG4gXHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIGNvbG9yOiAjMjEyMTIxO1xyXG4gICBmb250LXdlaWdodDogYm9sZDtcclxuICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcclxuICAgIHdoaXRlLXNwYWNlOiBub3JtYWw7XHJcbiAgICBsaW5lLWhlaWdodDogMS4yO1xyXG4gICAgcGFkZGluZzogMXB4O1xyXG4gICAgbGkge1xyXG5cclxuICAgICAgZGlzcGxheTogaW5saW5lO1xyXG5cclxuICAgICAgaW9uLWljb24ge1xyXG5cclxuICAgICAgICAvL3BhZGRpbmc6IDhweCAycHggMHB4O1xyXG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgICAgICB0b3A6IDAuMXJlbTtcclxuICAgICAgICBtYXJnaW4tbGVmdDogNXB4O1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBsaTpsYXN0LWNoaWxkIHtcclxuICAgICAgaW9uLWljb24ge1xyXG4gICAgICAgIGRpc3BsYXk6IG5vbmU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gICAgLy8gIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xyXG4gIH1cclxufVxyXG5cclxuLyogLmNpdHkgc3BhbjphZnRlciB7XHJcbiAgY29udGVudDogXCIgPiBcIjtcclxuICBkaXNwbGF5OiBpbmxpbmU7XHJcbn1cclxuLmNpdHkgc3BhbjpsYXN0LWNoaWxkOmFmdGVyIHtcclxuICBjb250ZW50OiBub25lO1xyXG59ICovXHJcblxyXG5pb24tbGFiZWwge1xyXG4gIHAge1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYXJvdW5kO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmY2NiYztcclxuICAgIHBhZGRpbmc6IDFyZW07XHJcbiAgICBjb2xvcjogIzIxMjEyMTtcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgcGFkZGluZzogMCAxcmVtO1xyXG4gICAgLy8gY29sb3I6IHZhcigtLWlvbi1jb2xvci1wcmltYXJ5KTtcclxuICB9XHJcbn1cclxuIl19 */\";","import { Component, OnInit } from \"@angular/core\";\r\nimport { NavController } from \"@ionic/angular\";\r\nimport { Subscription } from \"rxjs\";\r\nimport { ICity } from \"../../places.model\";\r\nimport { PlacesService } from \"../../places.service\";\r\n\r\n@Component({\r\n  selector: \"app-offer\",\r\n  templateUrl: \"./offer.page.html\",\r\n  styleUrls: [\"./offer.page.scss\"],\r\n})\r\nexport class OfferPage implements OnInit {\r\n  routs: Array<any>;\r\n  paths: Subscription;\r\n  currencyChanged: Subscription;\r\n  startPointCity: ICity;\r\n  endPointCity: ICity;\r\n  isLoading: boolean;\r\n  currentCurrency: string;\r\n\r\n  constructor(\r\n    private navCtrl: NavController,\r\n    private placesSrv: PlacesService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.isLoading = true;\r\n    this.currentCurrency = this.placesSrv.currentCurrency;\r\n    this.currencyChanged = this.placesSrv.currencyChanged$.subscribe(\r\n      (res: { name: string; rate: number; previousRate: number }) => {\r\n        this.currentCurrency = res.name;\r\n        this.routs = this.recalculatePrice(res.rate, res.previousRate);\r\n      }\r\n    );\r\n\r\n    this.paths = this.placesSrv.pathsSubj$.subscribe((res) => {\r\n      this.startPointCity = this.placesSrv.startPointCity;\r\n      this.endPointCity = this.placesSrv.endPointCity;\r\n      this.routs = res as Array<any>;\r\n      this.routs = this.routs.map((rout: any) => {\r\n        return {\r\n          ...rout,\r\n          cities: this.getCities(rout),\r\n          icons: this.getTransportTypes(rout),\r\n        };\r\n      });\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  toSearchPage() {\r\n    this.navCtrl.navigateBack(\"places/tabs/discover\");\r\n  }\r\n\r\n  private getCities(rout: { direct_paths: Array<any> }): any {\r\n    const citiesSet = new Set<string>();\r\n    rout.direct_paths.forEach((r: { from: string; to: string }) => {\r\n      citiesSet.add(r.from);\r\n      citiesSet.add(r.to);\r\n    });\r\n    return Array.from(citiesSet);\r\n  }\r\n\r\n  private getTransportTypes(rout: { direct_paths: Array<any> }): any {\r\n    const transportIcons = rout.direct_paths.map((r: { imgUrl: string }) => {\r\n      return r.imgUrl;\r\n    });\r\n    return transportIcons;\r\n  }\r\n\r\n  private recalculatePrice(rate: number, previousRate: number): Array<any> {\r\n    return this.routs.map((rout) => {\r\n      return {\r\n        ...rout,\r\n        euro_price: rout.euro_price * (rate / previousRate),\r\n        direct_paths: rout.direct_paths.map((path) => {\r\n          return {\r\n            ...path,\r\n            euro_price: path.euro_price * (rate / previousRate),\r\n          };\r\n        }),\r\n      };\r\n    });\r\n  }\r\n}\r\n"]}